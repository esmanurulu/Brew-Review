<!DOCTYPE html>
<html lang="tr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>KullanÄ±cÄ± Profili - Brew&Review</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #3e2723; color: #fcf6f0; font-family: 'Poppins', sans-serif; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .profile-header { background: #5d4037; padding: 40px; border-radius: 20px; text-align: center; border: 2px solid #8d6e63; margin-bottom: 30px; }
        .avatar { font-size: 4rem; }
        h1 { margin: 5px 0; color: #ffca28; }
        .barista-badge { background: #ff6f00; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.9rem; display: inline-block; margin-top: 5px; }
        
        .btn-follow { background: #ffca28; color: #3e2723; padding: 10px 30px; border-radius: 25px; font-weight: bold; border: none; cursor: pointer; font-size: 1.1rem; margin-top: 20px; transition: 0.3s; }
        .btn-follow:hover { transform: scale(1.05); }
        .btn-unfollow { background: transparent; border: 2px solid #a1887f; color: #d7ccc8; }
        
        .stats-container { display: flex; gap: 20px; justify-content: center; margin-top: 25px; }
        .stat-box { background: rgba(255,255,255,0.1); padding: 10px 20px; border-radius: 10px; }
        .stat-number { font-size: 1.5rem; font-weight: bold; color: #ffca28; display: block; }
        
        .btn-back { display: inline-block; margin-bottom: 20px; color: #d7ccc8; text-decoration: none; border: 1px solid #8d6e63; padding: 8px 20px; border-radius: 30px; }
    </style>
</head>
<body>

<div class="container">
    <a href="/cafes" class="btn-back">â† Listeye DÃ¶n</a> <div class="profile-header">
        <div class="avatar">
            <span th:if="${isBarista}">ğŸ‘¨â€ğŸ³</span>
            <span th:unless="${isBarista}">ğŸ‘¤</span>
        </div>
        
        <h1 th:text="${user.username}">KullanÄ±cÄ± AdÄ±</h1>
        
        <div th:if="${isBarista}">
            <span class="barista-badge">OnaylÄ± Barista âœ…</span>
            <p style="margin-top:10px; opacity:0.8;">Deneyim: <span th:text="${employeeData.experienceYears}"></span> YÄ±l</p>
        </div>

        <div style="margin-top: 15px; font-size: 1.1rem;">
            ğŸ· Favori Ä°Ã§eceÄŸi: <strong th:text="${user.favoriteDrink} ?: 'HenÃ¼z seÃ§medi'">Yok</strong>
        </div>

        <div class="stats-container">
            <div class="stat-box">
                <span class="stat-number" th:text="${reviewCount}">0</span>
                <span>Yorum</span>
            </div>
            <div class="stat-box">
                <span class="stat-number" th:text="${visitCount}">0</span>
                <span>Ziyaret</span>
            </div>
            <div class="stat-box" th:if="${isBarista}">
                <span class="stat-number" th:text="${followerCount}">0</span>
                <span>TakipÃ§i</span>
            </div>
        </div>

        <div th:if="${isBarista}" style="margin-top: 20px;">
            <form th:action="@{/follow/employee/{id}(id=${employeeData.employeeId})}" method="post">
                <button th:if="${isFollowing}" type="submit" class="btn-follow btn-unfollow">âœ… Takip Ediliyor</button>
                <button th:unless="${isFollowing}" type="submit" class="btn-follow">â• Takip Et</button>
            </form>
        </div>
    </div>

    <h3>Son YorumlarÄ±</h3>
    <div th:if="${#lists.isEmpty(reviews)}" style="opacity:0.5; text-align:center;">HenÃ¼z yorum yapmamÄ±ÅŸ.</div>
    <div th:each="review : ${reviews}" style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin-bottom: 10px;">
        <strong th:text="${review.cafe.name}" style="color:#ffca28;">Kafe</strong>
        <span th:text="'â˜… ' + ${review.ratingOverall}">5.0</span>
        <p th:text="${review.comment}" style="margin: 5px 0; opacity: 0.9;">Yorum...</p>
        <small th:text="${#dates.format(review.reviewDate, 'dd MMM yyyy')}" style="opacity:0.5;">Tarih</small>
    </div>

</div>

</body>
</html>