<!DOCTYPE html>
<html lang="tr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Profilim - Brew&Review</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #3e2723; color: #fcf6f0; font-family: 'Poppins', sans-serif; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; padding-bottom: 50px; }
        
        /* √úst Bilgi */
        .profile-header {
            background: #5d4037; padding: 30px; border-radius: 20px; text-align: center; 
            border: 2px solid #8d6e63; margin-bottom: 30px;
        }
        .avatar { font-size: 4rem; margin-bottom: 10px; }
        
        /* ƒ∞statistikler */
        .stats-container { display: flex; gap: 15px; justify-content: center; margin-top: 20px; flex-wrap: wrap; }
        .stat-box {
            background: rgba(255,255,255,0.1); padding: 15px 25px; border-radius: 15px; min-width: 100px;
        }
        .stat-number { font-size: 1.8rem; font-weight: bold; color: #ffca28; display: block; }
        .stat-label { font-size: 0.9rem; opacity: 0.8; }

        /* B√∂l√ºmler */
        h3 { border-bottom: 2px solid #8d6e63; padding-bottom: 10px; color: #ffcc80; margin-top: 40px; }
        
        .list-item {
            background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; 
            margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;
            transition: 0.3s;
        }
        .list-item:hover { background: rgba(255,255,255,0.1); transform: translateX(5px); }
        
        a { color: #ffca28; text-decoration: none; font-weight: bold; }
        .btn-back { display: inline-block; margin-bottom: 20px; color: #fcf6f0; text-decoration: none; border: 1px solid #8d6e63; padding: 8px 20px; border-radius: 30px; }
    </style>
</head>
<body>

<div class="container">
    <a href="/dashboard" class="btn-back">‚Üê Ana Ekrana D√∂n</a>

    <div class="profile-header">
        <div class="avatar">‚òïÔ∏è</div>
        <h1 th:text="${user.username}">Kullanƒ±cƒ±</h1>
        <p th:text="${user.email}" style="opacity: 0.6;">email</p>

        <div class="stats-container">
            <div class="stat-box">
                <span class="stat-number" th:text="${visitCount}">0</span>
                <span class="stat-label">Ziyaret</span>
            </div>
            <div class="stat-box">
                <span class="stat-number" th:text="${reviewCount}">0</span>
                <span class="stat-label">Yorum</span>
            </div>
        </div>
    </div>

    <h3>‚ù§Ô∏è Favori Kafelerim</h3>
    <div th:if="${#lists.isEmpty(favorites)}" style="opacity:0.5;">Hen√ºz favorin yok.</div>
    <div th:each="fav : ${favorites}" class="list-item">
        <span th:text="${fav.cafe.name}">Kafe Adƒ±</span>
        <a th:href="@{/cafe/{id}(id=${fav.cafe.cafeId})}">Git ‚Ä∫</a>
    </div>

    <h3>üìç Son Ziyaretlerim</h3>
    <div th:if="${#lists.isEmpty(visits)}" style="opacity:0.5;">Hen√ºz ziyaret yok.</div>
    <div th:each="visit : ${visits}" class="list-item">
        <div>
            <span th:text="${visit.cafe.name}" style="font-weight:bold;">Kafe</span>
            <small style="opacity:0.6; margin-left:10px;" th:text="${visit.visitDate}">Tarih</small>
        </div>
        <a th:href="@{/cafe/{id}(id=${visit.cafe.cafeId})}">Git ‚Ä∫</a>
    </div>

    <h3>üí≠ Son Yorumlarƒ±m</h3>
    <div th:if="${#lists.isEmpty(reviews)}" style="opacity:0.5;">Hen√ºz yorum yok.</div>
    <div th:each="review : ${reviews}" class="list-item">
        <div>
            <span th:text="${review.cafe.name}">Kafe</span>
            <span style="color:#ffca28; margin-left:5px;" th:text="'‚òÖ ' + ${review.ratingOverall}">5.0</span>
        </div>
        <a href="/my-reviews">Y√∂net ‚Ä∫</a>
    </div>

</div>
</body>
</html>